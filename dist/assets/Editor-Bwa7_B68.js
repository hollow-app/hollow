import{c as n,m as L,I as O,b as V,p as g,x as S,o as U,t as x,i as a,C as Z,al as j,S as B,a4 as C,D as N,l as T,k as G,q as W}from"./index-CNe0vCeo.js";var X=[["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}],["path",{d:"m14 5 3-3 3 3",key:"1sorif"}],["path",{d:"m14 10 3-3 3 3",key:"1jyi9h"}],["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M17 14H7l-5 8h20Z",key:"13ar7p"}],["path",{d:"M8 14v8",key:"1ghmqk"}],["path",{d:"m9 14 5 8",key:"13pgi6"}]],Y=e=>n(O,L(e,{iconNode:X,name:"tent-tree"})),F=Y,J=x('<div class="flex-1 overflow-y-scroll pr-3 pl-[calc(var(--spacing)*3+8px)] text-gray-950 dark:text-gray-50"><div class=h-fit><h1 class="mt-5 text-2xl font-bold">Size</h1><div class="bg-secondary-10/50 my-3 flex flex-col gap-3 rounded-lg p-3"></div><h1 class="mt-4 text-2xl font-bold">Appearance</h1><div class="bg-secondary-10/50 my-3 flex flex-col gap-3 rounded-lg p-3"><div class="flex items-center justify-between"><h3>Border</h3><div class="flex w-[60%] items-center justify-end gap-1"><div class="w-70 max-w-[90%]"></div></div></div></div><h1 class="mt-4 text-2xl font-bold">Position</h1><div class="bg-secondary-10/50 my-3 flex flex-col gap-3 rounded-lg p-3"></div></div><div class="mt-2 flex h-fit min-h-20 w-full gap-4 pr-3 pl-[calc(var(--spacing)*3+8px)]"><button class="button primary">Save</button><button class="button secondary">Cancel'),K=x('<div id=editor-panel class="flex size-full flex-col overflow-hidden rounded-xl p-5"><div class>'),Q=x('<div class="flex h-full w-full items-center justify-center"><div class="text-secondary-20 animate-pulse"><span>SELECT A CARD'),ee=x('<div class="flex items-center justify-between"><h3></h3><div class="w-70 max-w-[50%]">'),te=x('<div class="flex items-center justify-between"><h3></h3><div class=toggle-switch><input class=toggle-input type=checkbox><label class=toggle-label>'),le=x('<div class="border-secondary-10 flex h-fit w-full gap-2"><div class="flex-1 space-y-1"><div class="flex gap-2">');function ne(){const[e,u]=V(g.pevents.getData("editor")),[d,s]=V(null),i=S(()=>{if(!e())return null;const l=e().cardId;return l?g.cards().find(c=>c.id===l):null}),t=S(()=>{var l;return((l=i())==null?void 0:l.style)??{}}),f=(l,c)=>{const o=e().cardId;g.setCards(h=>h.id===o,l,c)},m=(l,c)=>{const o=e().cardId;g.setCards(h=>h.id===o,"style",l,c)},D=l=>{if(!l.cardId||e().cardId===l.cardId)return;const c=g.cards().find(o=>o.id===l.cardId);c&&(s(structuredClone(C(c))),u(l))},P=()=>{const l=e().cardId,c=C(g.cards().find(o=>o.id===l));delete c.data.tool,g.toolManager.updateCards([{toolName:e().tool,cards:[c]}]),g.pevents.emit("editor",null)},z=()=>{d()&&g.setCards(l=>l.id===e().cardId,d()),g.pevents.emit("editor",null)};return U(()=>{d()||s(structuredClone(C(i())))}),(()=>{var l=K(),c=l.firstChild;return a(c,n(re,{selected:e,selectCard:D,setSelected:u})),a(l,n(B,{get when(){return i()},get fallback(){return(()=>{var o=Q(),h=o.firstChild,p=h.firstChild;return a(h,n(F,{class:"mx-auto size-10"}),p),o})()},get children(){var o=J(),h=o.firstChild,p=h.firstChild,$=p.nextSibling,E=$.nextSibling,v=E.nextSibling,_=v.firstChild,H=_.firstChild,w=H.nextSibling,k=w.firstChild,R=v.nextSibling,y=R.nextSibling,A=h.nextSibling,I=A.firstChild,q=I.nextSibling;return a($,n(b,{label:"Width",get value(){return i().w},step:1,min:1,setValue:r=>f("w",r)}),null),a($,n(b,{label:"Height",get value(){return i().h},step:1,min:1,setValue:r=>f("h",r)}),null),a(v,n(b,{label:"Corner",get value(){return Number(t()["border-radius"].toString().split("px")[0])},setValue:r=>m("border-radius",r+"px")}),_),a(v,n(b,{label:"Opacity",get value(){return Number((t()["--opacity"]??"100%").toString().split("%")[0])},setValue:r=>m("--opacity",`${r}%`),step:5,max:100}),_),a(w,n(Z,{get color(){return t()["border-color"]},setColor:r=>m("border-color",r)}),k),a(k,n(j,{get value(){return Number(t()["border-width"].toString().split("px")[0])},setValue:r=>m("border-width",r+"px"),direct:!0})),a(v,n(M,{label:"Glass",get checked(){return!!t()["backdrop-filter"]},onToggle:r=>m("backdrop-filter",r?"blur(var(--blur-sm))":"none")}),null),a(v,n(M,{label:"Shadow",get checked(){return!!t()["box-shadow"]},onToggle:r=>m("box-shadow",r?"var(--shadow-sm)":"none")}),null),a(y,n(b,{label:"X",get value(){return i().x},setValue:r=>f("x",r),min:-1e4}),null),a(y,n(b,{label:"Y",get value(){return i().y},setValue:r=>f("y",r),min:-1e4}),null),a(y,n(b,{label:"Z",get value(){return Number(t()["z-index"]??0)},setValue:r=>m("z-index",r),max:500,min:0}),null),I.$$click=P,q.$$click=z,o}}),null),l})()}function b(e){return(()=>{var u=ee(),d=u.firstChild,s=d.nextSibling;return a(d,()=>e.label),a(s,n(j,{get value(){return e.value},get setValue(){return e.setValue},get step(){return e.step},get max(){return e.max},get min(){return e.min},direct:!0})),u})()}function M(e){const u=crypto.randomUUID();return(()=>{var d=te(),s=d.firstChild,i=s.nextSibling,t=i.firstChild,f=t.nextSibling;return a(s,()=>e.label),t.$$click=m=>e.onToggle(m.currentTarget.checked),T(t,"id",`${u}-toggle`),T(f,"for",`${u}-toggle`),G(()=>t.checked=e.checked),d})()}function re(e){const u=S(()=>{if(!e.selected())return[];const d=e.selected().tool;if(!d)return[];const s=g.toolManager.getHand()[d];return(s==null?void 0:s.cards.filter(i=>i.data.isPlaced).map(i=>({name:i.data.name,id:i.id})))??[]});return(()=>{var d=le(),s=d.firstChild,i=s.firstChild;return a(i,n(N,{get value(){var t;return((t=e.selected())==null?void 0:t.tool)??""},onSelect:t=>e.setSelected({tool:t,cardId:null}),get options(){return[{items:Object.keys(g.toolManager.getHand())}]},placeholder:"Tool"}),null),a(i,n(N,{get value(){var t;return((t=u().find(f=>f.id===e.selected().cardId))==null?void 0:t.name)??""},onSelect:t=>{e.selected()&&e.selectCard({tool:e.selected().tool,cardId:u().find(f=>f.name===t).id})},get options(){return[{items:u().map(t=>t.name)}]},placeholder:"Card"}),null),d})()}W(["click"]);export{ne as default};
